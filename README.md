# Adaptive Glass - 自适应图片比例边框处理软件

Adaptive Glass 是一款图片边框处理工具，专为摄影师和社交媒体内容创作者设计。它能够智能地调整图片比例，添加高斯模糊背景、圆角边框和阴影，并支持读取 EXIF 信息生成精美的水印。

## ✨ 主要功能

- **自适应比例调整**：支持 1:1 (Instagram), 4:3, 16:9 (YouTube), 9:16 (TikTok) 等多种主流社交媒体比例，也支持保持原始比例。
- **智能背景填充**：自动使用图片内容的模糊版本填充背景，提供“标准”、“暗色玻璃”、“亮色玻璃”三种风格。
- **精美边框与阴影**：支持圆角边框、细边框，可自定义圆角大小、边框宽度、颜色及阴影强度，打造立体感。
- **智能 EXIF 水印**：
  - 自动读取照片的 EXIF 信息（机型、ISO、光圈、快门、焦段）。
  - 支持自定义水印文本，提供三种模式：
    - **追加模式 (Append)**：显示 EXIF 信息 + 自定义文本（智能回退：无 EXIF 时只显示自定义文本）。
    - **备用模式 (Fallback)**：优先显示 EXIF，无 EXIF 时显示自定义文本。
    - **替换模式 (Replace)**：忽略 EXIF，只显示自定义文本。
  - 支持自定义字体、颜色、透明度、大小及位置（默认正下方）。
  - **中文支持**：自动检测中文文本并使用系统字体（如微软雅黑）防止乱码。
- **批量处理**：支持一次性处理大量图片，自动应用当前设置，支持自定义输出文件名后缀和格式（Auto/PNG/JPG）。
- **现代深色界面**：采用舒适的深色主题 UI，操作直观便捷。

## 🚀 快速开始

### 运行环境

- Windows 10/11
- Python 3.8+
- 依赖库：PyQt6, Pillow, piexif

### 安装依赖

```bash
pip install -r requirements.txt
```

### 启动软件

```bash
python main.py
```

## 📖 使用指南

### 1. 单张图片处理

1.  点击工具栏的 **“打开图片”** 或直接将图片拖入预览区域。
2.  在右侧设置面板调整参数：
    - **目标比例**：选择你想要输出的图片比例。
    - **内容缩放**：调整主体图片在画布中的大小（建议 90%）。
    - **背景模糊**：调整背景的模糊程度和风格。
    - **边框设置**：选择边框样式（圆角/直角/无），调整圆角半径和阴影。
    - **智能水印**：勾选“启用水印”，选择字体、位置，输入自定义文本（可选）。
3.  点击 **“导出图片”**，软件会自动填充文件名（后缀 `_border`）并保存。

### 2. 批量处理

1.  点击工具栏的 **“批量处理”** 按钮。
2.  在弹出的对话框中点击 **“添加文件”** 选择多张图片。
3.  确认顶部的 **“当前设置摘要”** 是否符合预期（批量处理将应用主界面的当前设置）。
4.  设置 **“输出选项”**：
    - **文件名后缀**：默认为 `_processed`。
    - **输出格式**：推荐选择 `Auto (原格式)` 或 `JPG`。
5.  选择 **“输出目录”**，点击 **“开始处理”**。

### 3. 添加自定义字体

软件默认支持系统字体，并内置了 `SMILETSANS-OBLIQUE.TTF`。如果您想添加更多字体：

1.  找到软件根目录下的 `resources/fonts` 文件夹（如果不存在请手动创建）。
2.  将您的 `.ttf` 或 `.otf` 字体文件复制到该文件夹中。
3.  重启软件，在右侧设置面板的“字体”下拉框中即可看到新添加的字体。

## ⚙️ 水印模式说明

- **追加模式 (Append)**（默认）：
  - 有 EXIF：显示 `[机型]  ISO.. f/..  |  [自定义文本]`
  - 无 EXIF：显示 `[自定义文本]` (大号字体)
  - 无 EXIF 且无自定义文本：不显示水印
- **备用模式 (Fallback)**：
  - 有 EXIF：显示 `[机型]  ISO.. f/..`
  - 无 EXIF：显示 `[自定义文本]`
- **替换模式 (Replace)**：
  - 始终显示 `[自定义文本]`，忽略 EXIF 信息。

## 📝 注意事项

- 批量处理时，建议先用单张图片调试好效果，再进行批量操作。
- 如果图片没有 EXIF 信息（如网图），建议使用“替换模式”或输入自定义文本以确保水印美观。

---

@Wuzhen
